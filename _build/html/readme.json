{"version":2,"kind":"Article","sha256":"ffdd613627db50d4852bb57b40ef1e4b45fba59674e0fb76dd786f6a1098c3ed","slug":"readme","location":"/HOOK/README.md","dependencies":[],"frontmatter":{"title":"Hook Service","content_includes_title":true,"numbering":{"title":{"offset":1}},"thumbnail":"/build/DestinE-banner-6c2eb150e9d965f57a9ba99945269d56.jpg","exports":[{"format":"md","filename":"README.md","url":"/build/README-63eebb7f7fe030203b9d0539098d78f0.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"image","url":"/build/DestinE-banner-6c2eb150e9d965f57a9ba99945269d56.jpg","alt":"Destination Earth banner","key":"AbQtlCXR1Y","urlSource":"../img/DestinE-banner.jpg"}],"key":"pVLBpTtNwz"},{"type":"heading","depth":1,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Hook Service","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"y99PEX67Yg"}],"identifier":"hook-service","label":"Hook Service","html_id":"hook-service","implicit":true,"key":"PQp7FG1QC6"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"image","style":{"float":"left","width":"5%"},"url":"/build/EUMETSAT-icon-273fc63bad2e241e36cd3193da7b8834.png","key":"dkQocfwF2b","urlSource":"../img/EUMETSAT-icon.png"},{"type":"text","value":" ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"HBjO5Mnk05"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Author:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Dd7PyAnPRM"}],"key":"DfGEWAA4DQ"},{"type":"text","value":" EUMETSAT\n","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gxUY48esmE"},{"type":"break","key":"zzUebtNODz"}],"key":"oOh4T1B9ZQ"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"This folder contains materials for learning how to use Hook Service.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xE7XQiQxbm"}],"key":"tGNjAzl25H"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"The Destination Earth Data Lake (DEDL) ‘Hook service’ provides ready-to-use high level serverless workflows and functions preconfigured to efficiently access and manipulate Destination Earth Data Lake (DEDL) data. A growing number of workflows and functions will provide on-demand capabilities for the diverse data analysis needs.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"bkQNQwRLGi"}],"key":"bVJUsALS71"},{"type":"heading","depth":2,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Notebooks","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"QneyR7xxTA"}],"identifier":"notebooks","label":"Notebooks","html_id":"notebooks","implicit":true,"key":"WjCX12v6bD"},{"type":"heading","depth":3,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"link","url":"","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Tutorial","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"VKEQ1sZhDd"}],"urlSource":"","key":"H4IVKq2uDj"},{"type":"text","value":": How to discover available workflows and run one example (data-harvest workflow)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"MKE8FMEY2u"}],"identifier":"tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","label":"Tutorial: How to discover available workflows and run one example (data-harvest workflow)","html_id":"tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","implicit":true,"key":"INDNREo9pH"},{"type":"code","lang":"shell","value":"#The Tutorial.ipynb is executeable as-is, but parameters can be provided from a file .env_tutorial\n#To provide environment parameters from file\n\n# 1. create a file called .env_tutorial in the same folder as the notebook\n# 2. paste in the following contents\n# 3. execute the Tutorial.ipynb notebook which should now pick up the environment variables from file\n\n########## SET HOOK_ORDER_NAME ##########\n# This will be added to the order name. e.g. replace XXXX with your name\n\nHOOK_ORDER_NAME=XXXX-20250212-1\n\n########## SET WORKFLOW, COLLECTION_ID and DATA_ID ##########\n# Uncomment HOOK_WORKFLOW (to identify the HOOK to execute)\n# Uncomment HOOK_COLLECTION_ID (to identify the DEDL Collection where the data comes from)\n# Uncomment HOOK_DATA_ID (to identify the data that is input to the HOOK)\n# Uncomment HOOK_SOURCE_TYPE (to identify the source_type of the HOOK. Possible values are DESP, EXTERNAL...)\n\n# DEDL HDA input possible\n\n#HOOK_WORKFLOW=card_bs\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_GRD\n#HOOK_DATA_ID=S1A_IW_GRDH_1SDV_20230910T054256_20230910T054321_050261_060CD9_BF21.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=lai\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L2A\n#HOOK_DATA_ID=S2A_MSIL2A_20230906T102601_N0509_R108_T32UMA_20230906T164400.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n# INPUT PRODUCT TYPES: SLC, S1_SLC__1S, S2_SLC__1S, S3_SLC__1S, S4_SLC__1S, S5_SLC__1S, S6_SLC__1S, IW_SLC__1S, EW_SLC__1S, WV_SLC__1S\n#HOOK_WORKFLOW=card_cohinf\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_SLC\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20240121T155314_20240121T155341_052207_064FA6_3AB9\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_COH;VALUE_TYPE=str\"\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20230930T172417_20230930T172444_050560_06170F_59DF\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_INF;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timespan;VALUE=24;VALUE_TYPE=int\"\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=c2rcc\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T31TGL_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\nHOOK_WORKFLOW=data-harvest\nHOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\nHOOK_DATA_ID=S2A_MSIL1C_20230910T050701_N0509_R019_T47VLH_20230910T074321.SAFE\nHOOK_SOURCE_TYPE=DESP\n#HOOK_SOURCE_TYPE=EXTERNAL\n#HOOK_EXTERNAL_TOKEN_URL=https://identity.XXXX/auth/realms/XXXX/protocol/openid-connect/token\n#HOOK_EXTERNAL_CLIENT_ID=hda_public\n#HOOK_EXTERNAL_USERNAME=\n#HOOK_EXTERNAL_PASSWORD=\n\n#HOOK_WORKFLOW=sen2cor\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T32TMS_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\n##### DEDL HDA input NOT possible at the moment. i.e. source_type is not DESP nor EXTERNAL #####\n# These HOOKs have specific configuration. See below\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=copdem\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S3A_SL_1_RBT____20161110T022134_20161110T022434_20181003T070309_0179_010_374______LR1_R_NT_003.SEN3\n#HOOK_SOURCE_TYPE=\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=maja\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE\n#HOOK_SOURCE_TYPE=\n#HOOK_ADDITIONAL1=\"NAME=input_type;VALUE=TIMESPAN;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timeseries_end_id;VALUE=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL3=\"NAME=timespan;VALUE=18;VALUE_TYPE=int\"\n\n\n########## START : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n# # This 'Custom Hook' demonstrator expects a file called 'example.data' in the 'source_s3_path' bucket/folder (of the configured source_s3_endpoint)\n# # The text contents of example.data will be converted to Upper Case and output to Private or Temporary Storage\n\n# HOOK_WORKFLOW=dedl_hello_world\n\n# # Needs to be empty\n# HOOK_COLLECTION_ID=\n\n# # This normally contains the ID of a product, but for Custom Hooks we will set it to an arbitrary value 'Custom Hook'\n# HOOK_DATA_ID=Custom Hook\n\n# # Needs to be empty\n# HOOK_SOURCE_TYPE=\n\n# # Setting source_s3_path TO s3://XXXX/dedl_hello_world/input_file_location\n# HOOK_ADDITIONAL1=\"NAME=source_s3_path;VALUE=s3://XXXX/dedl_hello_world/input_file_location;VALUE_TYPE=str\"\n# # Setting source_s3_endpoint_url TO https://s3.central.data.destination-earth.eu\n# HOOK_ADDITIONAL2=\"NAME=source_s3_endpoint_url;VALUE=https://s3.central.data.destination-earth.eu;VALUE_TYPE=str\"\n# # Setting source_s3_access_key TO YYYY (change this to your access_key)\n# HOOK_ADDITIONAL3=\"NAME=source_s3_access_key;VALUE=YYYY;VALUE_TYPE=str\"\n# # Setting source_s3_secret_key TO ZZZZ (change this to your access_key)\n# HOOK_ADDITIONAL4=\"NAME=source_s3_secret_key;VALUE=ZZZZ;VALUE_TYPE=str\"\n\n########## END : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n########## SET STORAGE OPTION ##########\n# If you set HOOK_IS_PRIVATE_STORAGE to True you will need to set the bucket name, access key, and secret key\nHOOK_IS_PRIVATE_STORAGE=False\n#HOOK_OUTPUT_BUCKET=your_bucket-name\n#HOOK_OUTPUT_STORAGE_ACCESS_KEY=your_access_key\n#HOOK_OUTPUT_STORAGE_SECRET_KEY=your_secret_key\n","position":{"start":{"line":20,"column":1},"end":{"line":134,"column":1}},"key":"mkseAaFsll"},{"type":"heading","depth":3,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"link","url":"","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"DEDL​-Hook​_access​.ipynb","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"dVaZff0QIq"}],"urlSource":"","key":"KuqbszR3JQ"},{"type":"text","value":": Simple retrieval of token and listing of workflows","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"bxP1rFVUrU"}],"identifier":"dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","label":"DEDL-Hook_access.ipynb: Simple retrieval of token and listing of workflows","html_id":"dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","implicit":true,"key":"aY939GDQTB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":139,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":139,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Launch this noteboook with your DESP credentials and retrieve a token you can use to interact with OnDemand Processing API (Hook API)","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"jMNPuR1jcV"}],"key":"FHlfKgLiyw"}],"key":"Y7eNt9aNOY"},{"type":"heading","depth":2,"position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"Further Information","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"H7UuVjAU0z"}],"identifier":"further-information","label":"Further Information","html_id":"further-information","implicit":true,"key":"PR263Rsi4H"},{"type":"paragraph","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"Further information available in DestinE Data Lake documentation: ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"bLyTSxvmFD"},{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/index.html","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"https://​destine​-data​-lake​-docs​.data​.destination​-earth​.eu​/en​/latest​/index​.html","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"tjacywtq26"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/index.html","key":"ytwHdNkSBJ"}],"key":"QQKt0U8Bmu"},{"type":"blockquote","position":{"start":{"line":147,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":147,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"strong","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"Additional ressources:","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"P0GqtaoGMx"}],"key":"o0wifllhed"},{"type":"text","value":"\nDestinE Data Portfolio: ","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"wk6fqo7o38"},{"type":"link","url":"https://hda.data.destination-earth.eu/ui/catalog","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/ui​/catalog","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"re7YhwrxZm"}],"urlSource":"https://hda.data.destination-earth.eu/ui/catalog","key":"Ucj0IxszHJ"},{"type":"text","value":"\nDataLake Priority services: ","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"euC6uLHPBP"},{"type":"link","url":"https://hda.data.destination-earth.eu/ui/services","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/ui​/services","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"v08wZmZ7Ot"}],"urlSource":"https://hda.data.destination-earth.eu/ui/services","key":"B4S30LKWXo"},{"type":"text","value":"\nHDA SWAGGER UI: ","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"pn8yfrK8yQ"},{"type":"link","url":"https://hda.data.destination-earth.eu/docs/","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/docs/","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"nKIgtJQVSG"}],"urlSource":"https://hda.data.destination-earth.eu/docs/","key":"y5u7q293gZ"}],"key":"YegFnjlDxR"}],"key":"fvjTtcZrb1"}],"key":"mubDgHYCAX"}],"key":"jbXJcPhJ2N"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"DEDL notebook gallery","url":"/","group":"DEDL notebook gallery"}}},"domain":"http://localhost:3000"}