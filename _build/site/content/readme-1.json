{"version":2,"kind":"Article","sha256":"e67e073c5e765084be7ea0d58420a307bf00662e54f873c62023dfa0ff7c3dd3","slug":"readme-1","location":"/HOOK/README.md","dependencies":[],"frontmatter":{"title":"Hook Service","authors":[{"id":"Author: EUMETSAT","name":"Author: EUMETSAT"}],"numbering":{"title":{"offset":1}},"thumbnail":"/EUMETSAT-icon-273fc63bad2e241e36cd3193da7b8834.png","exports":[{"format":"md","filename":"README.md","url":"/README-185854679fe9cfc9fa684cb88a4d5ad0.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","children":[{"type":"image","style":{"float":"left","width":"5%"},"url":"/EUMETSAT-icon-273fc63bad2e241e36cd3193da7b8834.png","key":"VyUyEqpu59","urlSource":"../img/EUMETSAT-icon.png"}],"key":"nmNm5DlFaQ"},{"type":"break","key":"evdC1WYLs0"},{"type":"paragraph","children":[{"type":"text","value":"This folder contains materials for learning how to use Hook Service.","key":"vgyAXejgNo"}],"key":"QppxJ4CGwF"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The Destination Earth Data Lake (DEDL) ‘Hook service’ provides ready-to-use high level serverless workflows and functions preconfigured to efficiently access and manipulate Destination Earth Data Lake (DEDL) data. A growing number of workflows and functions will provide on-demand capabilities for the diverse data analysis needs.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"D7k1Curfmr"}],"key":"zSjeOasmgQ"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Notebooks","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"W8Bx6X4Jrj"}],"identifier":"notebooks","label":"Notebooks","html_id":"notebooks","implicit":true,"key":"iT9ZhxA3PC"},{"type":"heading","depth":3,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"link","url":"","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Tutorial","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"o2x7PM585C"}],"urlSource":"","key":"D8CQvPBuXC"},{"type":"text","value":": How to discover available workflows and run one example (data-harvest workflow)","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"uO2TWsxyFj"}],"identifier":"tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","label":"Tutorial: How to discover available workflows and run one example (data-harvest workflow)","html_id":"tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","implicit":true,"key":"TWFveumzN9"},{"type":"code","lang":"shell","value":"#The Tutorial.ipynb is executeable as-is, but parameters can be provided from a file .env_tutorial\n#To provide environment parameters from file\n\n# 1. create a file called .env_tutorial in the same folder as the notebook\n# 2. paste in the following contents\n# 3. execute the Tutorial.ipynb notebook which should now pick up the environment variables from file\n\n########## SET HOOK_ORDER_NAME ##########\n# This will be added to the order name. e.g. replace XXXX with your name\n\nHOOK_ORDER_NAME=XXXX-20250212-1\n\n########## SET WORKFLOW, COLLECTION_ID and DATA_ID ##########\n# Uncomment HOOK_WORKFLOW (to identify the HOOK to execute)\n# Uncomment HOOK_COLLECTION_ID (to identify the DEDL Collection where the data comes from)\n# Uncomment HOOK_DATA_ID (to identify the data that is input to the HOOK)\n# Uncomment HOOK_SOURCE_TYPE (to identify the source_type of the HOOK. Possible values are DESP, EXTERNAL...)\n\n# DEDL HDA input possible\n\n#HOOK_WORKFLOW=card_bs\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_GRD\n#HOOK_DATA_ID=S1A_IW_GRDH_1SDV_20230910T054256_20230910T054321_050261_060CD9_BF21.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=lai\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L2A\n#HOOK_DATA_ID=S2A_MSIL2A_20230906T102601_N0509_R108_T32UMA_20230906T164400.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n# INPUT PRODUCT TYPES: SLC, S1_SLC__1S, S2_SLC__1S, S3_SLC__1S, S4_SLC__1S, S5_SLC__1S, S6_SLC__1S, IW_SLC__1S, EW_SLC__1S, WV_SLC__1S\n#HOOK_WORKFLOW=card_cohinf\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_SLC\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20240121T155314_20240121T155341_052207_064FA6_3AB9\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_COH;VALUE_TYPE=str\"\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20230930T172417_20230930T172444_050560_06170F_59DF\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_INF;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timespan;VALUE=24;VALUE_TYPE=int\"\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=c2rcc\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T31TGL_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\nHOOK_WORKFLOW=data-harvest\nHOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\nHOOK_DATA_ID=S2A_MSIL1C_20230910T050701_N0509_R019_T47VLH_20230910T074321.SAFE\nHOOK_SOURCE_TYPE=DESP\n#HOOK_SOURCE_TYPE=EXTERNAL\n#HOOK_EXTERNAL_TOKEN_URL=https://identity.XXXX/auth/realms/XXXX/protocol/openid-connect/token\n#HOOK_EXTERNAL_CLIENT_ID=hda_public\n#HOOK_EXTERNAL_USERNAME=\n#HOOK_EXTERNAL_PASSWORD=\n\n#HOOK_WORKFLOW=sen2cor\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T32TMS_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\n##### DEDL HDA input NOT possible at the moment. i.e. source_type is not DESP nor EXTERNAL #####\n# These HOOKs have specific configuration. See below\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=copdem\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S3A_SL_1_RBT____20161110T022134_20161110T022434_20181003T070309_0179_010_374______LR1_R_NT_003.SEN3\n#HOOK_SOURCE_TYPE=\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=maja\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE\n#HOOK_SOURCE_TYPE=\n#HOOK_ADDITIONAL1=\"NAME=input_type;VALUE=TIMESPAN;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timeseries_end_id;VALUE=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL3=\"NAME=timespan;VALUE=18;VALUE_TYPE=int\"\n\n\n########## START : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n# # This 'Custom Hook' demonstrator expects a file called 'example.data' in the 'source_s3_path' bucket/folder (of the configured source_s3_endpoint)\n# # The text contents of example.data will be converted to Upper Case and output to Private or Temporary Storage\n\n# HOOK_WORKFLOW=dedl_hello_world\n\n# # Needs to be empty\n# HOOK_COLLECTION_ID=\n\n# # This normally contains the ID of a product, but for Custom Hooks we will set it to an arbitrary value 'Custom Hook'\n# HOOK_DATA_ID=Custom Hook\n\n# # Needs to be empty\n# HOOK_SOURCE_TYPE=\n\n# # Setting source_s3_path TO s3://XXXX/dedl_hello_world/input_file_location\n# HOOK_ADDITIONAL1=\"NAME=source_s3_path;VALUE=s3://XXXX/dedl_hello_world/input_file_location;VALUE_TYPE=str\"\n# # Setting source_s3_endpoint_url TO https://s3.central.data.destination-earth.eu\n# HOOK_ADDITIONAL2=\"NAME=source_s3_endpoint_url;VALUE=https://s3.central.data.destination-earth.eu;VALUE_TYPE=str\"\n# # Setting source_s3_access_key TO YYYY (change this to your access_key)\n# HOOK_ADDITIONAL3=\"NAME=source_s3_access_key;VALUE=YYYY;VALUE_TYPE=str\"\n# # Setting source_s3_secret_key TO ZZZZ (change this to your access_key)\n# HOOK_ADDITIONAL4=\"NAME=source_s3_secret_key;VALUE=ZZZZ;VALUE_TYPE=str\"\n\n########## END : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n########## SET STORAGE OPTION ##########\n# If you set HOOK_IS_PRIVATE_STORAGE to True you will need to set the bucket name, access key, and secret key\nHOOK_IS_PRIVATE_STORAGE=False\n#HOOK_OUTPUT_BUCKET=your_bucket-name\n#HOOK_OUTPUT_STORAGE_ACCESS_KEY=your_access_key\n#HOOK_OUTPUT_STORAGE_SECRET_KEY=your_secret_key\n","position":{"start":{"line":18,"column":1},"end":{"line":132,"column":1}},"key":"Na3HjETdy5"},{"type":"heading","depth":3,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"link","url":"","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"DEDL​-Hook​_access​.ipynb","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"ZNCIT7wYid"}],"urlSource":"","key":"pHCbUo2iCO"},{"type":"text","value":": Simple retrieval of token and listing of workflows","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"XYFsUnky5p"}],"identifier":"dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","label":"DEDL-Hook_access.ipynb: Simple retrieval of token and listing of workflows","html_id":"dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","implicit":true,"key":"mN27THoLJZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":137,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":137,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"Launch this noteboook with your DESP credentials and retrieve a token you can use to interact with OnDemand Processing API (Hook API)","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"liLntezdL6"}],"key":"yg5dsqln9L"}],"key":"xfZiUB4j7J"},{"type":"heading","depth":2,"position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"children":[{"type":"text","value":"Further Information","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"Wh0nqm7fAu"}],"identifier":"further-information","label":"Further Information","html_id":"further-information","implicit":true,"key":"SixTpcxYdd"},{"type":"paragraph","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"Further information available in DestinE Data Lake documentation: ","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"DEYS2ecITy"},{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/index.html","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"https://​destine​-data​-lake​-docs​.data​.destination​-earth​.eu​/en​/latest​/index​.html","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"ZtkiFPyrex"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/index.html","key":"queHEmEu1w"}],"key":"el10AB3j9M"},{"type":"blockquote","position":{"start":{"line":145,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":145,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"strong","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"Additional ressources:","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"VEW4OumElp"}],"key":"HbUd3rBdf3"},{"type":"text","value":"\nDestinE Data Portfolio: ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"JD1WYHCNGd"},{"type":"link","url":"https://hda.data.destination-earth.eu/ui/catalog","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/ui​/catalog","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"nBqoazlcBZ"}],"urlSource":"https://hda.data.destination-earth.eu/ui/catalog","key":"Xy1c8j6cWD"},{"type":"text","value":"\nDataLake Priority services: ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"mXWYEb7hhh"},{"type":"link","url":"https://hda.data.destination-earth.eu/ui/services","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/ui​/services","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"ysonjKqBng"}],"urlSource":"https://hda.data.destination-earth.eu/ui/services","key":"cIinEivOFB"},{"type":"text","value":"\nHDA SWAGGER UI: ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"uWZt7NOeKY"},{"type":"link","url":"https://hda.data.destination-earth.eu/docs/","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"https://​hda​.data​.destination​-earth​.eu​/docs/","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"gBHB3ixLBY"}],"urlSource":"https://hda.data.destination-earth.eu/docs/","key":"CidRwnLiJk"}],"key":"UiZjtTq63a"}],"key":"EJBwQol4Js"}],"key":"TO1rQRa4BB"}],"key":"rundUsRRV5"},"references":{"cite":{"order":[],"data":{}}}}